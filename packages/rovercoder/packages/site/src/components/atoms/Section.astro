---
import Background from "../helpers/Background.astro";
import type { BackgroundProperties } from "../helpers/Background.types";
import type { FlexProperties as FlexDisplayProperties } from "./Section.types";
interface Props {
    minHeight?: string;
    padding?: string;
    backgroundProperties?: BackgroundProperties;
    displayProperties: FlexDisplayProperties;
}
const { minHeight, padding, backgroundProperties, displayProperties } = Astro.props;

var display;
var flexDirection;
var flexWrap;
var justifyContent;
var alignItems;
var alignContent;
var gap;

switch (displayProperties.display) {
    case 'flex': 
        display = displayProperties.display;
        flexDirection = displayProperties.flexDirection;
        flexWrap = displayProperties.flexWrap;
        justifyContent = displayProperties.justifyContent;
        alignItems = displayProperties.alignItems;
        alignContent = displayProperties.alignContent;
        gap = displayProperties.gap;
        break;
    default:
        throw new Error(`Unsupported display properties for section! ${JSON.stringify(displayProperties)}`);
}
---

<section>
    <Background imageUrl={backgroundProperties?.backgroundImageUrl} color={backgroundProperties?.backgroundColor} imageRepeat={backgroundProperties?.backgroundImageRepeat} imageSize={backgroundProperties?.backgroundImageSize} borderRadius={backgroundProperties?.backgroundBorderRadius} type={backgroundProperties?.backgroundType}>
        <div class="section-content">
            <slot />
        </div>
    </Background>
</section>

<style lang="scss" define:vars={{ minHeight, padding, display, flexDirection, flexWrap, justifyContent, alignItems, alignContent, gap }}>
    @use '/src/styles/variables.scss' as *;

	section {
        position: relative;
	}

    .section-content {
        position: relative;
		padding: var(--padding);
		min-height: var(--minHeight);
		display: var(--display);
		flex-direction: var(--flexDirection);
		flex-wrap: var(--flexWrap);
		justify-content: var(--justifyContent);
		align-items: var(--alignItems);
		align-content: var(--alignContent);
        gap: var(--gap);
        transition: $sectionTransition;
    }
</style>
