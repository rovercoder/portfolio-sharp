---
import Image from "../../../components/atoms/Image.astro";
import type { ImageProps } from "../../../components/molecules/CardHeader.types";
import ImageBrowserOverlay from "../../../components/molecules/ImageBrowserOverlay.astro";
import type { ImageBrowserOverlayImageFnType, ImageBrowserOverlayTextFnType } from "../../../components/molecules/ImageBrowserOverlay.types";
import RoverCoderImageBrowserOverlayActionButton from "../atoms/RoverCoderImageBrowserOverlayActionButton.astro";
import RoverCoderText from "../atoms/RoverCoderText.astro";
import RoverCoderImageBrowserOverlayProgressIndicatorActionButtons from "./RoverCoderImageBrowserOverlayProgressIndicatorActionButtons.astro";
interface Props {
    images?: ImageProps | ImageProps[]
}
const { images } = Astro.props;

const textColor = '#000000';
const imageBrowserOverlayContainerPadding = 'clamp(1rem, 5vw, 2rem)';
const imageBrowserOverlayWidthLargerThanMobile = '100%';
const imageBrowserOverlayImageHeight = `calc(calc(calc(var(--overlayHeight, 0px) - calc(${imageBrowserOverlayContainerPadding} * 2)) - var(--image-browser-progress-indicators-action-buttons-height, 0px)) * .85)`;
const imageBrowserOverlayBackgroundColor = 'transparent';
const imageBrowserOverlayImageBackgroundColor = '#000000';
const imageBrowserOverlayTextBackgroundColor = '#F8F8F8';
const imageBrowserOverlayTextContainerPadding = '0.5rem';

const imageBrowserOverlayImageActionButtonContainerHeight = '100%';
const imageBrowserOverlayImageActionButtonPadding = '0.25rem';
const imageBrowserOverlayImageActionButtonMargin = '0.25rem';
const imageBrowserOverlayImageActionButtonBorderRadius = '.75rem';
const imageBrowserOverlayImageActionButtonBackgroundColor = '#000000';
const imageBrowserOverlayImageActionButtonOpacityInactive = '0.5';
const imageBrowserOverlayImageActionButtonIconSize = '2rem';

const progressIndicatorActionButtonsActionIndicatorsPadding = '0.125rem';
const progressIndicatorActionButtonsActionIndicatorsOpacityInactive = '0.5';
const progressIndicatorActionButtonsBackgroundColor = '#1C1C1C';
const progressIndicatorActionButtonsProgressIndicatorTextColor = '#000000';
const progressIndicatorActionButtonsProgressIndicatorGap = '0.25rem';
const progressIndicatorActionButtonsProgressIndicatorPadding = '0.125rem 0.375rem';
const progressIndicatorActionButtonsProgressIndicatorMargin = '0.125rem';
const progressIndicatorActionButtonsProgressIndicatorBorderRadius = '2rem';
const progressIndicatorActionButtonsProgressIndicatorBackgroundColor = '#C3C3C3';
---

<ImageBrowserOverlay 
        images={images} 
        containerPadding={imageBrowserOverlayContainerPadding} 
        widthLargerThanMobile={imageBrowserOverlayWidthLargerThanMobile} 
        imageHeight={imageBrowserOverlayImageHeight} 
        backgroundColor={imageBrowserOverlayBackgroundColor}
        imageBackgroundColor={imageBrowserOverlayImageBackgroundColor}
        textBackgroundColor={imageBrowserOverlayTextBackgroundColor}
        textContainerPadding={imageBrowserOverlayTextContainerPadding}
>
    <div slot="image">
        {((args) => <Image url={args.image.url} color={args.image.color} imageSize={args.imageSize ?? args.image.imageSize} imageRepeat={args.image.imageRepeat} />) satisfies ImageBrowserOverlayImageFnType}
    </div>
    <div slot="text">
        {((args) => 
            <Fragment>
                { 
                    args.image.description != null &&
                        <div class="description">
                            <RoverCoderText type="image-browser-image-description" content={args.image.description} color={textColor} isParagraph />
                        </div>
                }
            </Fragment>
        ) satisfies ImageBrowserOverlayTextFnType}
    </div>
    <RoverCoderImageBrowserOverlayActionButton 
        slot="action-previous" 
        type="previous" 
        containerHeight={imageBrowserOverlayImageActionButtonContainerHeight} 
        padding={imageBrowserOverlayImageActionButtonPadding}
        margin={imageBrowserOverlayImageActionButtonMargin}
        borderRadius={imageBrowserOverlayImageActionButtonBorderRadius}
        backgroundColor={imageBrowserOverlayImageActionButtonBackgroundColor}
        opacityInactive={imageBrowserOverlayImageActionButtonOpacityInactive}
        iconSize={imageBrowserOverlayImageActionButtonIconSize}
    />
    <RoverCoderImageBrowserOverlayActionButton 
        slot="action-next" 
        type="next" 
        containerHeight={imageBrowserOverlayImageActionButtonContainerHeight} 
        padding={imageBrowserOverlayImageActionButtonPadding}
        margin={imageBrowserOverlayImageActionButtonMargin}
        borderRadius={imageBrowserOverlayImageActionButtonBorderRadius}
        backgroundColor={imageBrowserOverlayImageActionButtonBackgroundColor}
        opacityInactive={imageBrowserOverlayImageActionButtonOpacityInactive}
        iconSize={imageBrowserOverlayImageActionButtonIconSize}
    />
    <RoverCoderImageBrowserOverlayProgressIndicatorActionButtons 
        slot="progress-indicator-action-buttons" 
        actionIndicatorsPadding={progressIndicatorActionButtonsActionIndicatorsPadding}
        actionIndicatorsOpacityInactive={progressIndicatorActionButtonsActionIndicatorsOpacityInactive}
        backgroundColor={progressIndicatorActionButtonsBackgroundColor}
        progressIndicatorTextColor={progressIndicatorActionButtonsProgressIndicatorTextColor}
        progressIndicatorGap={progressIndicatorActionButtonsProgressIndicatorGap}
        progressIndicatorPadding={progressIndicatorActionButtonsProgressIndicatorPadding}
        progressIndicatorMargin={progressIndicatorActionButtonsProgressIndicatorMargin}
        progressIndicatorBorderRadius={progressIndicatorActionButtonsProgressIndicatorBorderRadius}
        progressIndicatorBackgroundColor={progressIndicatorActionButtonsProgressIndicatorBackgroundColor}
    />
</ImageBrowserOverlay>
