---
import Image from "../../../../components/atoms/Image.astro";
import type { ImageProps } from "../../../../components/molecules/CardHeaderDefault.types";
import ImageBrowserOverlay from "../../../../components/molecules/overlays/ImageBrowserOverlay.astro";
import { imageBrowserStatusBarHeightCssVariableName } from "../../../../components/molecules/overlays/ImageBrowserOverlay.consts";
import type { ImageBrowserOverlayImageFnType, ImageBrowserOverlayTextFnType } from "../../../../components/molecules/overlays/ImageBrowserOverlay.types";
import { overlayHeightCssVariableName } from "../../../../components/molecules/overlays/Overlay.consts";
import RoverCoderImageBrowserOverlayActionButton from "../../atoms/RoverCoderImageBrowserOverlayActionButton.astro";
import RoverCoderText from "../../atoms/RoverCoderText.astro";
import RoverCoderImageBrowserOverlayStatusBar from "./RoverCoderImageBrowserOverlayStatusBar.astro";
interface Props {
    images?: ImageProps | ImageProps[]
}
const { images } = Astro.props;

const textColor = '#000000';
const imageBrowserOverlayContainerPadding = 'clamp(1rem, 5vw, 2rem)';
const imageBrowserOverlayWidthLargerThanMobile = '100%';
const imageBrowserOverlayImageHeight = `calc(calc(calc(var(${overlayHeightCssVariableName}, 0px) - calc(${imageBrowserOverlayContainerPadding} * 2)) - var(${imageBrowserStatusBarHeightCssVariableName}, 0px)) * .85)`;
const imageBrowserOverlayBackgroundColor = 'transparent';
const imageBrowserOverlayImageBackgroundColor = '#000000';
const imageBrowserOverlayTextBackgroundColor = '#F8F8F8';
const imageBrowserOverlayTextContainerPadding = '0.5rem';

const imageBrowserOverlayImageActionButtonContainerHeight = '100%';
const imageBrowserOverlayImageActionButtonPadding = '0.25rem';
const imageBrowserOverlayImageActionButtonMargin = '0.25rem';
const imageBrowserOverlayImageActionButtonBorderRadius = '.75rem';
const imageBrowserOverlayImageActionButtonBackgroundColor = '#000000';
const imageBrowserOverlayImageActionButtonOpacityInactive = '0.5';
const imageBrowserOverlayImageActionButtonIconSize = '2rem';

const statusBarActionIndicatorsPadding = '0.125rem';
const statusBarActionIndicatorsOpacityInactive = '0.5';
const statusBarBackgroundColor = '#1C1C1C';
const statusBarProgressIndicatorTextColor = '#000000';
const statusBarProgressIndicatorGap = '0.25rem';
const statusBarProgressIndicatorPadding = '0.125rem 0.375rem';
const statusBarProgressIndicatorMargin = '0.125rem';
const statusBarProgressIndicatorBorderRadius = '2rem';
const statusBarProgressIndicatorBackgroundColor = '#C3C3C3';
---

<ImageBrowserOverlay 
        images={images} 
        containerPadding={imageBrowserOverlayContainerPadding} 
        widthLargerThanMobile={imageBrowserOverlayWidthLargerThanMobile} 
        imageHeight={imageBrowserOverlayImageHeight} 
        backgroundColor={imageBrowserOverlayBackgroundColor}
        imageBackgroundColor={imageBrowserOverlayImageBackgroundColor}
        textBackgroundColor={imageBrowserOverlayTextBackgroundColor}
        textContainerPadding={imageBrowserOverlayTextContainerPadding}
>
    <div slot="image">
        {((args) => <Image url={args.image.url} color={args.image.color} imageSize={args.imageSize ?? args.image.imageSize} imageRepeat={args.image.imageRepeat} />) satisfies ImageBrowserOverlayImageFnType}
    </div>
    <div slot="text">
        {((args) => 
            <Fragment>
                { 
                    args.image.description != null &&
                        <div class="description">
                            <RoverCoderText type="image-browser-image-description" content={args.image.description} color={textColor} isParagraph />
                        </div>
                }
            </Fragment>
        ) satisfies ImageBrowserOverlayTextFnType}
    </div>
    <RoverCoderImageBrowserOverlayActionButton 
        slot="action-previous" 
        type="previous" 
        containerHeight={imageBrowserOverlayImageActionButtonContainerHeight} 
        padding={imageBrowserOverlayImageActionButtonPadding}
        margin={imageBrowserOverlayImageActionButtonMargin}
        borderRadius={imageBrowserOverlayImageActionButtonBorderRadius}
        backgroundColor={imageBrowserOverlayImageActionButtonBackgroundColor}
        opacityInactive={imageBrowserOverlayImageActionButtonOpacityInactive}
        iconSize={imageBrowserOverlayImageActionButtonIconSize}
    />
    <RoverCoderImageBrowserOverlayActionButton 
        slot="action-next" 
        type="next" 
        containerHeight={imageBrowserOverlayImageActionButtonContainerHeight} 
        padding={imageBrowserOverlayImageActionButtonPadding}
        margin={imageBrowserOverlayImageActionButtonMargin}
        borderRadius={imageBrowserOverlayImageActionButtonBorderRadius}
        backgroundColor={imageBrowserOverlayImageActionButtonBackgroundColor}
        opacityInactive={imageBrowserOverlayImageActionButtonOpacityInactive}
        iconSize={imageBrowserOverlayImageActionButtonIconSize}
    />
    <RoverCoderImageBrowserOverlayStatusBar 
        slot="status-bar" 
        actionIndicatorsPadding={statusBarActionIndicatorsPadding}
        actionIndicatorsOpacityInactive={statusBarActionIndicatorsOpacityInactive}
        backgroundColor={statusBarBackgroundColor}
        progressIndicatorTextColor={statusBarProgressIndicatorTextColor}
        progressIndicatorGap={statusBarProgressIndicatorGap}
        progressIndicatorPadding={statusBarProgressIndicatorPadding}
        progressIndicatorMargin={statusBarProgressIndicatorMargin}
        progressIndicatorBorderRadius={statusBarProgressIndicatorBorderRadius}
        progressIndicatorBackgroundColor={statusBarProgressIndicatorBackgroundColor}
    />
</ImageBrowserOverlay>
