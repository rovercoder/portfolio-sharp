---
import Card from '../../../components/molecules/Card.astro';
import Icon from '../../../components/atoms/Icon.astro';
import Image from '../../../components/atoms/Image.astro';
import RoverCoderText from '../atoms/RoverCoderText.astro';
import type { ImageProps } from './RoverCoderCard.types';

interface Props { 
    image?: ImageProps | ImageProps[];
    imageIsIcon?: boolean;
    title?: string
    description?: string;
    hint?: string;
}
const { image, imageIsIcon, title, description, hint } = Astro.props;
var _images = (image == null || (Array.isArray(image) && image.filter(x => x != null).length === 0)) ? null : (Array.isArray(image) ? image.filter(x => x != null) : [image]);
var mainImage;
const otherImages: ImageProps[] = [];
if (_images) {
    for (var i = 0; i < (_images?.length ?? 0); i++) {
        if (_images[i].isMainImage && mainImage == null) {
            mainImage = _images[i];
        } else {
            otherImages.push(_images[i]);
        }
    }
}
var firstImage = mainImage ?? (_images == null ? null : (_images.length > 0 ? _images[0] : null));

const imageHeight = '15rem';
var imageBorderRadius;
const iconSize = '6rem';
const iconMargin = '3rem';
const textMargin = '0 .5rem 0 .5rem';
const textPadding = '1.5rem 1rem 1rem 1rem';
const textBackgroundColor = '#ffffffd3';
const cardWidth = '15.2rem';
const cardBackgroundColor = '#E5E5E5';
const cardBorderRadius = '.5rem';
const cardBorder = '2px #c70000 solid';
const cardPadding = '0px 0px .5rem 0px';
const cardTextAlign = 'center';
const cardBoxShadow = '0px 0px 9px black';
---
<Card
    textMargin={textMargin}
    textPadding={textPadding}
    textBackgroundColor={textBackgroundColor}
    cardWidth={cardWidth}
    cardBackgroundColor={cardBackgroundColor}
    cardBorderRadius={cardBorderRadius}
    cardBorder={cardBorder}
    cardPadding={cardPadding}
    cardTextAlign={cardTextAlign}
    cardBoxShadow={cardBoxShadow}
>
    { _images != null && firstImage != null &&
        (imageIsIcon 
            ? <Icon slot="image" url={firstImage.url} color={firstImage.color} imageSize={firstImage.imageSize} borderRadius={imageBorderRadius} containerMargin={iconMargin} size={iconSize} />
            : <Image slot="image" url={firstImage.url} color={firstImage.color} imageSize={firstImage.imageSize} imageRepeat={firstImage.imageRepeat} borderRadius={imageBorderRadius} height={imageHeight} />
        )
    }
    { title != null && <RoverCoderText slot="title" type="card-title" content={title} /> }
    { hint != null && <RoverCoderText slot="hint" type="card-hint" content={hint} isParagraph /> }
    { description != null && <RoverCoderText slot="description" type="card-description" content={description} isParagraph /> }
</Card>
